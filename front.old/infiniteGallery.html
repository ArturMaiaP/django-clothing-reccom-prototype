<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
      integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/static/css/styles.css" />
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/config.js"></script>
    <script src="/static/js/likedislike.js"></script>
    <link
      href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Third party plugin CSS-->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"
      rel="stylesheet"
    />

    <title>Images Gallery</title>
    <script>
      var user = localStorage.getItem("User");
      var chatId = null;
      var finalSkirt = null;
      if (!user) {
        window.location.replace("/login.html");
      } else {
        user = JSON.parse(user);
      }
    </script>
  </head>
  <body>
    <header class="jumbotron font-weight-bold">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-12 text-center text-white">
            <h1>
              Let us know your opinion. Please, let us know all that you like
              and dislikes, and if you find one that you want to by, just click
              in the shopping cart.
            </h1>
          </div>
        </div>
      </div>
    </header>

    <div class="container">
      <!--
        <div class="row row-header justify-content-center ">
            <h4> Let us know your opinion. Is there any skirt below that you like?
            </h4>
        </div>
        -->
      <div class="row">
        <div class="col-12">
          <div class="row row-content" id="infiniteDiv"></div>
          <div id="infiniteDivEnd">
            <button onclick="recommend()" class="btn btn-primary">
              More Skirts Recommendations
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="finish-prompt" class="modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Finish</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>
              Are you sure that you found your skirt and want to finish the
              experiment?
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              No
            </button>
            <button
              onclick="finish('/thanks.html')"
              type="button"
              class="btn btn-primary"
            >
              Yes
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="fab-container">
      <div class="sub-button shadow">
        <a href="/instructions.html" target="_blank">
          <span class="fa fa-question text-white"></span>
        </a>
      </div>
    </div>
    <script>
      function recommend() {
        getRecommendation("#infiniteDiv");
      }
      // $(window).scroll(function () {
      //   if (
      //     Math.abs(
      //       $(window).scrollTop() - ($(document).height() - $(window).height())
      //     ) < 1
      //   ) {
      //     recommend();
      //   }
      // });
      $(window).ready(function () {
        recommend();
        // if (
        //   $(window).scrollTop() == 0 &&
        //   $(document).height() - $(window).height() == 0
        // ) {
        //   recommend();
        // }
      });
    </script>
  </body>
</html>
